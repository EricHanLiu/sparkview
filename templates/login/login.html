{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<!-- begin::Head -->
<head>
    <meta charset="utf-8"/>
    <title>
        Bloom | Login
    </title>
    <meta name="description" content="Latest updates and statistic charts">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!--begin::Web font -->
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
    <script>
        WebFont.load({
            google: {"families": ["Poppins:300,400,500,600,700", "Roboto:300,400,500,600,700"]},
            active: function () {
                sessionStorage.fonts = true;
            }
        });
    </script>
    <!--end::Web font -->
    <!--begin::Base Styles -->
    <link href="{% static 'assets/vendors/base/vendors.bundle.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/demo/default/base/style.bundle.css' %}" rel="stylesheet" type="text/css"/>
    <!--end::Base Styles -->
    <link rel="shortcut icon" href="https://www.makeitbloom.com/wp-content/themes/bloom/src/favicons/apple-touch-icon.png"/>
</head>
<!-- end::Head -->
<!-- end::Body -->
<body class="m--skin- m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--skin-dark m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default">
<!-- begin:: Page -->
<div class="m-grid m-grid--hor m-grid--root m-page">
    <div class="m-grid__item m-grid__item--fluid m-grid m-grid--hor m-login m-login--singin m-login--2 m-login-2--skin-3"
         id="m_login" style="background-color: #00882d">
        <div class="m-grid__item m-grid__item--fluid	m-login__wrapper">
            <div class="m-login__container">
                <div class="m-login__logo">
                    <a href="#">
                        <?xml version="1.0" encoding="utf-8"?>
                        <!-- Generator: Adobe Illustrator 21.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
                        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 177.9 49" style="enable-background:new 0 0 177.9 49;" xml:space="preserve">
<style type="text/css">
	.st0 {
        fill: #FFF;
    }
</style>
<g>
	<path class="st0" d="M157.6,0L157.6,0H134c-4.6,0-8.2,3.8-8.2,8.3v40.6h8.1V10.2c0-1.1,0.8-1.9,1.9-1.9l0,0h6V49h8.1V8.2h6
		c1.1,0,1.9,0.9,1.9,1.9v38.7h8.1V8.3C165.8,3.8,162.2,0,157.6,0z"/>
	<polygon class="st0" points="40.1,0 40.1,0 32,0 32,48.9 56,48.9 56,40.7 40.1,40.7 	"/>
	<path class="st0" d="M85.7,8.2c0-4.5-3.6-8.2-8.1-8.2l0,0l0,0h-7.9c-4.5,0-8.1,3.7-8.1,8.2l0,0v32.5c0,4.5,3.6,8.2,8.1,8.2l0,0h7.9
		c4.5,0,8.1-3.7,8.1-8.2l0,0V8.2z M77.6,38.7c0,1.1-0.8,1.9-1.9,1.9h-4.1c-1.1,0-1.9-0.9-1.9-1.9l0,0V10.2c0-1.1,0.8-1.9,1.9-1.9
		h4.1c1.1,0,1.9,0.9,1.9,1.9V38.7z"/>
	<path class="st0" d="M16.3,0H0v48.9h16.3c4.5,0,8.1-3.7,8-8.2V30c0-3.8-2.1-5.3-5-5.7c2.9-0.4,5-1.9,5-5.7V8.2
		C24.3,3.7,20.7,0,16.3,0z M16.2,38.7c0,1.1-0.9,2-2,2H8V27.9h6.2c1.1,0,2,0.9,2,2V38.7z M16.2,18.7L16.2,18.7c0,1.1-0.9,2-2,2H8
		V8.3h6.2c1.1,0,2,0.9,2,2V18.7z"/>
	<path class="st0" d="M117.8,8.2c0-4.5-3.6-8.2-8.1-8.2l0,0h-7.9c-4.5,0-8.1,3.7-8.1,8.2l0,0v32.5c0,4.5,3.6,8.2,8.1,8.2l0,0h7.9
		c4.5,0,8.1-3.7,8.1-8.2l0,0V8.2z M109.7,38.7L109.7,38.7c0,1.1-0.8,1.9-1.9,1.9h-4.1c-1.1,0-1.9-0.9-1.9-1.9V10.2
		c0-1.1,0.8-1.9,1.9-1.9h4.1c1.1,0,1.9,0.9,1.9,1.9V38.7z"/>
	<path class="st0" d="M175.3,45.2L175.3,45.2c0.2-0.3,0.3-0.7,0.3-1c0-0.4-0.2-0.9-0.5-1.2s-0.7-0.5-1.2-0.5h-1.6v4.6h0.7v-1.3h0.8
		l1,1.3h0.9l-1.1-1.4C174.9,45.5,175.1,45.4,175.3,45.2z M173.1,45.1L173.1,45.1v-1.9h0.9c0.5,0,0.9,0.4,0.9,0.9
		c0,0.3-0.1,0.5-0.3,0.7s-0.4,0.3-0.7,0.3H173.1z"/>
	<path class="st0" d="M177.6,43.3L177.6,43.3c-0.2-0.5-0.5-0.9-0.9-1.3c-0.4-0.4-0.8-0.7-1.3-0.9s-1-0.3-1.6-0.3
		c-0.5,0-1.1,0.1-1.6,0.3s-0.9,0.5-1.3,0.9c-0.8,0.8-1.2,1.8-1.2,2.9c0,0.5,0.1,1.1,0.3,1.6s0.5,0.9,0.9,1.3
		c0.4,0.4,0.8,0.7,1.3,0.9s1,0.3,1.6,0.3c0.5,0,1.1-0.1,1.6-0.3s0.9-0.5,1.3-0.9c0.4-0.4,0.7-0.8,0.9-1.3s0.3-1.1,0.3-1.6
		C177.9,44.3,177.8,43.8,177.6,43.3z M176.8,46.1L176.8,46.1c-0.2,0.4-0.4,0.7-0.7,1s-0.6,0.5-1,0.7s-0.8,0.3-1.2,0.3
		s-0.9-0.1-1.3-0.3c-0.4-0.2-0.7-0.4-1-0.7c-1.3-1.3-1.3-3.3,0-4.6c0.3-0.3,0.6-0.5,1-0.7s0.8-0.3,1.3-0.3c0.4,0,0.8,0.1,1.2,0.3
		s0.7,0.4,1,0.7c0.6,0.6,0.9,1.5,0.9,2.3C177.1,45.3,177,45.7,176.8,46.1z"/>
</g>
</svg>
                    </a>
                </div>
                <div class="m-login__signin">
                    <div class="m-login__head">
                        <h3 class="m-login__title">
                            Sign In To Admin
                        </h3>
                    </div>
                    <form class="m-login__form m-form" id="custom_login" action=".">
                        {% csrf_token %}
                        <div class="form-group m-form__group">
                            <input class="form-control m-input" type="text" placeholder="Username" name="username"
                                   autocomplete="off">
                        </div>
                        <div class="form-group m-form__group">
                            <input class="form-control m-input m-login__form-input--last" type="password"
                                   placeholder="Password" name="password">
                        </div>
                        <div class="row m-login__form-sub">
                            <div class="col m--align-left m-login__form-left">
                                <label class="m-checkbox  m-checkbox--light">
                                    <input type="checkbox" name="remember">
                                    Remember me
                                    <span></span>
                                </label>
                            </div>
                        </div>
                        <div class="m-login__form-action">
                            <button type="submit" id="m_login_signin_submit"
                                    class="btn btn-focus m-btn m-btn--pill m-btn--custom m-btn--air  m-login__btn">
                                Sign In
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function getCookie(name) {
        var value = "; " + document.cookie;
        var parts = value.split("; " + name + "=");
        if (parts.length == 2) return parts.pop().split(";").shift();
    }


    function ajaxPOST(url, data, callback) {
        let xml = new XMLHttpRequest();
        let ready = function () {
            return ((xml['readyState'] === 4) && (xml['status'] == 200)) ? callback(xml['responseText']) : '';
        };
        let csrftoken = getCookie('csrftoken');
        xml['open']('POST', url, true);
        xml['setRequestHeader']('X-CSRFTOKEN', csrftoken);
        xml['setRequestHeader']('Content-Type', 'application/json');
        xml['onreadystatechange'] = ready;
        xml['send'](JSON.stringify(data));
    }

    var loginForm = function (form) {
        this.form = document.getElementById(form);
        this.btn = document.getElementById('m_login_signin_submit');
        this.csrf_token = getCookie('csrftoken');


        loginForm.prototype.init = function () {
            this.form.addEventListener('submit', this.onSubmit)
        };

        loginForm.prototype.getValues = function () {
            return {'username': this.username.value, 'password': this.password.value}
        };

        loginForm.prototype.onSubmit = function (e) {
            username = this.querySelectorAll('[name=username]')[0];
            password = this.querySelectorAll('[name=password]')[0];
            e.preventDefault();
            ajaxPOST('{% url 'login' %}',
		{'username': username.value, 'password': password.value},
                function (data) {
			console.log('success');
                    	window.location.replace('{% url 'index' %}');
                })
        }
    };


    var custom_login = new loginForm('custom_login');
    custom_login.init()


</script>
<!-- end:: Page -->
<!--begin::Base Scripts -->
<script src="{% static 'assets/vendors/base/vendors.bundle.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/demo/default/base/scripts.bundle.js' %}" type="text/javascript"></script>
<!--end::Base Scripts -->
<!--begin::Page Snippets -->
{#        <script src="{% static 'assets/snippets/pages/user/login.js' %}"#}
<!--end::Page Snippets -->
</body>
<!-- end::Body -->
</html>
